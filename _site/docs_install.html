<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Basic installation</title>
    <meta name="description"
          content="OpenMapKitWebsite is the website for the OpenMapKit project. We are moving all training material within the wiki to the website
">

    <link rel="apple-touch-icon" sizes="57x57" href="../images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
<link rel="manifest" href="../images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="..images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fontello.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/home-nav.css">

    <script src="javascripts/libs.js" type="text/javascript"></script>
    <script >
        // terrificjs bootstrap
    (function ($) {
        $(document).ready(function () {
            var $page = $('body');
            var config = {
                dependencyPath: {
                    plugin: 'javascripts/'
                }
            }
            var application = new Tc.Application($page, config);
            application.registerModules();
            application.start();
        });
    })(Tc.$);
    </script>

    <script src="javascripts/masonry.pkgd.js" type="text/javascript"></script>
    <script src="javascripts/slick.min.js" type="text/javascript"></script>

</head>

<head>

    <!-- Styles -->
    <link rel="stylesheet" href="css/theDocs.all.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/docs.css">

</head>


<body>

<div class='contain-to-grid sticky fixed'>
    <nav class='top-bar docs-nav-width' data-options='sticky_on: large' data-topbar=''>

        <ul class='title-area'>
            <li class='name'>
                <h1>
                    <a href='index.html'>
                        <div class="icn-logo_OMK"></div>
                    </a>
                </h1>
            </li>

            <li class="custom-topbar">
                <button type="button" class="custom-nav navbar-toggle for-sidebar" data-toggle="offcanvas">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            </li>

        </ul>
        <section class='top-bar-section'>
            <ul class="right">
                
                

                
                <li class="">
                    <a href="index.html">Home</a>
                </li>
                
                
                

                
                <li class="">
                    <a href="docs.html">Documentation</a>
                </li>
                
                
            </ul>
        </section>
    </nav>
</div>


<div role='main'>
    <div class="row">

    <!-- Sidebar -->
<aside id="new-sidebar">

    <div id="sideBar" class="new-sidebar-content">
        <ul class="">
        

        <li>
            <a href="index.html">Home</a>
            
            
        </li>

        

        <li>
            <a href="docs.html">Documentation</a>
            
            <ul class="open">
                
                <li class="" id="Users">
                    
                        <a href="#"> Users</a>
                    
                    <ul class="open">
                        
                        <li class="" id="Installation">
                            <a href="docs_install.html"> Installation</a>
                        </li>
                        
                        <li class="" id="Creating Forms">
                            <a href="docs_odkformsforomk.html"> Creating Forms</a>
                        </li>
                        
                        <li class="" id="Creating OSM Basemap">
                            <a href="docs_creatingbasemaps.html"> Creating OSM Basemap</a>
                        </li>
                        
                        <li class="" id="Additional Resources">
                            <a href="docs_additionalresources.html"> Additional Resources</a>
                        </li>
                        
                    </ul>
                </li>
                
                <li class="" id="Tutorials">
                    
                        <a href="#"> Tutorials</a>
                    
                    <ul class="open">
                        
                        <li class="" id="Walkthrough">
                            <a href="docs_walkthrough.html"> Walkthrough</a>
                        </li>
                        
                    </ul>
                </li>
                
                <li class="" id="Constraints">
                    
                        <a href="docs_constraints.html"> Constraints</a>
                    
                    <ul class="open">
                        
                    </ul>
                </li>
                
                <li class="" id="Developers">
                    
                        <a href="#"> Developers</a>
                    
                    <ul class="open">
                        
                        <li class="" id="Architecture">
                            <a href="docs_developers.html"> Architecture</a>
                        </li>
                        
                        <li class="" id="Technical Specs">
                            <a href="docs_developers.html"> Technical Specs</a>
                        </li>
                        
                        <li class="" id="Contributing Code">
                            <a href="docs_developers.html"> Contributing Code</a>
                        </li>
                        
                    </ul>
                </li>
                
            </ul>
            
        </li>

        

    </ul>
    </div>
</aside>
<!-- END Sidebar -->

<script type="text/javascript">

    jQuery(window).ready(function() {

        var pathname = window.location.pathname; // Returns path only
        $("#sideBar ul li a").each(function(){
            if (($(this).attr('href')) == pathname){
                $(this).addClass("activeMenu");
//                return false;
            }

        });

    });


</script>


    <article class="col-md-12 col-sm-12 main-content new-sidebar-main-padding" role="main">

        <section>
            <h2 id="installation">Installation</h2>

<h4 id="before-getting-started">Before getting started</h4>

<p><em>Prerequisites:</em>
You’ll need the lastest version of both ODK Collect and OpenMapKit on your Android device. OpenMapKit currently supports Android version 4.2 and higher.
You will also need install OpenMapKit Server in order manage surveys and OSM data, deploy them to your Android devices and submit surveys back to OSM.</p>

<h4 id="odk-collect">ODK Collect</h4>

<p>You can either download ODK Collect on the <a href="https://play.google.com/store/apps/details?id=org.odk.collect.android">Google Play Store</a> or directly download the <a href="https://opendatakit.org/downloads/download-category/collect/">APK</a>.</p>

<h4 id="openmapkit">OpenMapKit</h4>

<p>Once ODK Collect is installed download OpenMapKit from the <a href="https://play.google.com/store/apps/developer?id=OpenMapKit">Google Play Store</a> or get the APK <a href="https://github.com/AmericanRedCross/OpenMapKitAndroid/releases">here</a>.</p>

<h4 id="openmapkit-server">OpenMapKit Server</h4>
<p>Once ODK Collect and OpenMapKit are on your Android device, install OpenMapKit Server on an environment of your choosing.</p>

<p>For an actual deployment of OpenMapKit Server, it is recommended to use
<a href="https://github.com/AmericanRedCross/posm-build">posm-build</a> to install your
instance. posm-build is a lightweight shell build system used for POSM servers.
OpenMapKit Server is designed to be a part of a POSM server, however, the
posm-build allows you to be modular regarding what gets installed, so you can
and should use it if you want to install a standalone OpenMapKit Server.</p>

<p>The advantage is that in a few lines, you can have OpenMapKit Server installed
and integrated as an Upstart service in Ubuntu Linux. This means that if
OpenMapKit Server crashes or is restarted, the API will restart automatically.
Also, posm-build only gets the dependencies you need and downloads only the
files you need, so the entire repo does not need to be cloned with git.</p>

<p>Instructions for installing OpenMapKit Server on your development environment can be found <a href="https://github.com/AmericanRedCross/OpenMapKitServer/blob/master/docs/development-installation.md">here</a>.</p>

<h5 id="tested-on">Tested On</h5>

<ul>
  <li>Amazon EC2 Ubuntu Server 14.04 LTS
    <ul>
      <li>Instance Type: t2.nano</li>
      <li>vCPUs: 1</li>
      <li>Memory: 500 MB</li>
      <li>Storage: 8 GB</li>
      <li>Open Ports: 22, 80, 3210</li>
    </ul>
  </li>
</ul>

<p>OpenMapKit Server is intended to be as light-weight as possible, so you don’t
have to throw much hardware at it.</p>

<h5 id="steps">Steps</h5>

<ol>
  <li>
    <p>Download and extract posm-build.</p>

    <pre><code> sudo -s
 wget -q -O - https://github.com/AmericanRedCross/posm-build/archive/master.tar.gz | tar -zxf - -C /root --strip=2
</code></pre>
  </li>
  <li>
    <p>Create a <code>settings.local</code> file in <code>/root/etc</code> with the following content:</p>

    <pre><code> posm_ip="54.191.109.128"
</code></pre>
  </li>
</ol>

<p>Replace the IP address for <code>posm_ip</code> with the actual public IP or your server. If you are on Amazon, this should be your Elastic IP.</p>

<ol>
  <li>
    <p>Execute <code>bootstrap.sh</code> and tell it to only install NGINX and OpenMapKit Server.</p>

    <pre><code> /root/scripts/bootstrap.sh base virt nodejs nginx omk
</code></pre>
  </li>
</ol>

<p>Let the installation churn. That’s it!</p>

<h5 id="upstart">Upstart</h5>

<p>You can start / stop / restart the <code>omk-service</code> like any Ubuntu Upstart service.</p>

<pre><code>sudo service omk-server stop
sudo service omk-server start
sudo service omk-server restart
</code></pre>

<h5 id="your-data">Your Data</h5>

<p>All of your data are stored in <code>/opt/omk/OpenMapKitServer/public</code>.</p>

<p>You can scp / sftp the</p>

<p>forms <code>/opt/omk/OpenMapKitServer/public/forms</code></p>

<p>deployments <code>/opt/omk/OpenMapKitServer/public/deployments</code></p>

<p>submissions <code>/opt/omk/OpenMapKitServer/public/submissions</code></p>

<p>from the server to backup and access your data. There is no database, so all of your data are in these files.</p>

<p>This is also included in the <a href="http://openmapkit.com/docs_walkthrough.html">Walkthrough Tutorial</a>.</p>

        </section>

    </article>
</div>


</div>

<div id='footer'>
    <div class='row footer-spacing'>
        <div class='small-12 medium-12 large-12 column group'>
            <div class="row">
                <!-- ARC logo -->
                <div class="small-12 medium-3 large-2 column inline-flex logo-width">
                    <a class="logo" href='http://www.redcross.org' target="_blank">
                        <img src="images/logo_RC.png" class="footer-logo"/>
                    </a>
                </div>

                <!-- Social Media Links -->
                <div class="small-12 medium-3 large-2 column social-media">
                    <ul class='socials'>
                        <li class="pull-left">
                            <a href='https://twitter.com/openmapkit' target="_blank">
                                <i class='fa fa-twitter mini-icon'></i>
                            </a>
                        </li>
                        <li class="pull-left">
                            <a href='https://github.com/AmericanRedCross/OpenMapKitAndroid' target="_blank">
                                <i class='fa fa-github mini-icon'></i>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="small-6 column">

                    <div class="row">

                        <!-- Social Media Links -->
                        <div class="small-12 medium-12 large-12 column social-media-mobile">
                            <ul class='socials'>
                                <li class="pull-right">
                                    <a href='https://twitter.com/openmapkit' target="_blank">
                                        <i class='fa fa-twitter mini-icon'></i>
                                    </a>
                                </li>
                                <li class="pull-right">
                                    <a href='https://github.com/AmericanRedCross/OpenMapKitAndroid' target="_blank">
                                        <i class='fa fa-github mini-icon'></i>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- License -->
                        <div class="small-12 medium-12 large-12 column license-align">
                            <a target="_blank" class="license pull-right" rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                                <img alt="Creative Commons License" style="border-width:0" src="../images/ccby.svg"/>
                            </a>
                        </div>

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<script src="javascripts/jquery.countTo.js" type="text/javascript"></script>
<script src="javascripts/jquery.appear.js" type="text/javascript"></script>
<script src="javascripts/jquery.validate.js" type="text/javascript"></script>
<script src="javascripts/jquery.sequence-min.js" type="text/javascript"></script>
<script src="javascripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="javascripts/app.js" type="text/javascript"></script>
<script src="javascripts/jquery.min.js" type="text/javascript"></script>
<script src="javascripts/matchHeight.min.js" type="text/javascript"></script>
<script src="javascripts/clipboard.min.js" type="text/javascript"></script>
<script src="javascripts/jquery.fitvids.js" type="text/javascript"></script>
<script src="javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="javascripts/theDocs.js" type="text/javascript"></script>

<script src="javascripts/docs.js" type="text/javascript"></script>


</body>

</html>
